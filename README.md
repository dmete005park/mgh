// === CONFIGURATION ===
const AIRTABLE_PAT = 'pat159vsLfEOmkB28.1dc0ffd528611c9e4e1576280d45f66741f58b467d9892f48f77bb5b3ab3565d';
const AIRTABLE_BASE_ID = 'appCDZB437amxaRPq';
const AIRTABLE_TABLE_NAME = 'Clients';

const OPENAI_API_KEY = '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';  // your OpenAI API key
const MODEL = 'gpt-3.5-turbo';
const COST_PER_1K_TOKENS = 0.002;        // $0.002 per 1K tokens
const BUDGET_DOLLARS = 10.00;            // your total budget cap

// === SAMPLE TEMPLATES ===
const SAMPLE_IMPLEMENTATION = `
Implementation Plan
**PARTIAL IMPLENETATION PLAN**

**Participants Name:** Lorenzo Delpe

**Legal Status**: Has Capacity

**Language Spoken:** English

**Primary Diagnosis:** Intellectual Disability with IQ score of 61, Conduct Disorder and Disruptive Mood Dysregulation Disorder

**Date of Birth:** 10/21/2003

**Gender:** Male

**Race:** African American

**Social Security Number (last four digits):** 6297

**Current Address:** 11810 NW 30<sup>th</sup> Place, Sunrise, FL 33323

**Phone Number:** 754-245-8769

**Support Coordinator:** Belinda Alexander **Cell Phone:** 954-909-6341

**Admission Date:** 07/08/2023

**Support Plan Received:** 11/17/2023

**Support Plan Effective Date:** 11/01/2023

**Implementation Date:** 11/01/2023

**Implementation Effective Date:** 11/01/2023

## State Quarters of IPP Year

## 1<sup>st</sup>: Nov/Dec/Jan

## 2<sup>nd</sup>: Feb/Mar/Apr

## 3<sup>rd</sup>: May/Jun/Jul

## 4<sup>th</sup>: Aug/Sept/Oct

**IMPLENTATION PLAN SUMMARY**

A meeting was held between the consumer, Lorenzo Delpe and Group Home Administrator, Dawseah Hunter. Lorenzo was explained Residential Habilitation goals with several examples. From this explanation, he made the determination that he would like to work on those goals stated below.

Functional Assessment: The assessments are based on staff observation of the client’s abilities, along with the consumer’s input, review of records and the support plan. A data collection tool has been created to capture data, typically 3 times per each goal. This data will be statistically summarized monthly. A quarterly meeting, or more frequently, will be conducted with the consumer to review his progress and agreement to continue, discontinue or modify a goal. A quarterly summary report is created to capture any new or significant information regarding the consumer’s future views, health status, activities, and future goals. An annual report will be completed to summarize statistical progress for the year long with his future goals for the upcoming year. The strategies and written steps to achieve the consumer’s reshab goals for this year with complementing picture steps attached.

**INDIVIDUAL PROFILE:**

Lorenzo is a 19-year-old male who is diagnosed with Intellectual Disability with IQ score of 61, Conduct Disorder and Disruptive Mood Dysregulation Disorder. Currently, he is not enrolled in school due to summer break, nor is he employed. He likes listening to rap music and playing his Play Station games. Lorenzo has verbalized that he would like to become employed.

**LIFE CHANGE AND ADJUSTEMENT INFORMATION:**

Lorenzo has experienced the following stress factors causing adjustment concerns:

\-Change in place of residences (multiple group homes) and removal from his biological family

\-Baker Act

\-Incarceration

Lorenzo is expecting the following life changes over the next 12 months:

\-New housemates

\-Change of a significant long-term caregiver

**FUNCTIONAL STATUS:**

The following describes Lorenzo’s sensory functioning status that affects his capacity in performing daily activities:

**VISION:**

Lorenzo was prescribed glasses but has broken them; He was reassessed for a new pair and is awaiting same

**EATING:**

Lorenzo can eat his food without any assistance. Lorenzo must be monitored with food as he will eat excessively.

**AMUBLATION:**

Lorenzo is ambulatory and has no known physical limitation or concerns.

**TOILETING:**

Lorenzo uses the toilet independently. However, he must be reminded to wash his hands after using the toilet.

**HYGEINE:**

Lorenzo showers and brushes his teeth daily with verbal prompting. He must be prompted to shower properly each day. He very seldom combs his hair even after being reminded to do so.

**SELF PROTECTION:**

Due to risk of harm, Lorenzo requires training to protect himself from physical injury and sexual exploitation.

The following precautions are currently in place to ensure that Lorenzo is safe from physical injury and sexual exploitation:

Staff supervision and frequent reminders or instructions are provided regarding the dangers related to exploitation.

**COMMUNICATION:**

Lorenzo can communicate with full speech. He is often overheard speaking loudly and using profanity while on the phone with friends and or family members.

**ABILITY TO EVACUATE:**

Lorenzo can evacuate on his own.

**HEARING:**

Lorenzo has no known hearing impairment that impacts functioning.

**BEHAVIORS:**

Lorenzo recently moved into Friends to Family Group Home; staff is in the process of observing and getting to know him.

Observation thus far: Lorenzo must be reminded daily when it comes to hygiene. He must be verbally prompted to shower and brush his teeth, or he will have an odor. He is reminded to comb his hair but very seldom does. He has to be reminded to do his laundry every Saturday.

He has advised that he is afraid of the dark and must sleep with some amount of light on in his bedroom. Lorenzo likes to eat a lot and must be monitored at night, so he does not sneak food to his room.

**PHYSICAL STATUS:**

\-No history of acid reflux

Seizures:

\-No known history of seizures reported.

Skin Breakdown:

\-No skin breakdown

Bowel Function:

\-No bowel elimination issues nor with his intestinal tract

Nutrition:

\-Staff is working with Lorenzo to ensure proper and health eating habits

Level of Assistance Required with Health Care Needs Daily:

\-Requires daily reminders and verbal prompts to maintain health

\-Requires daily supervision

Injuries or Falls:

\-None

Physician visits:

\-Requires as needed visits on average to a physician or specialist

Emergency Room Visits:

\-None

Hospital Admissions:

\-None since moved into group home.

Missed Days at School, Job, Recreation or Other Activities due to illness:

\-Lorenzo is home daily as he does not attend school or program currently. He started summer school and then decided he no longer wanted to attend. He is currently waiting for school to restart on August 21, 2023. He has participated in all group home activities thus far.

**COMMUNITY INCLUSION AND FULLFILENT OF VALUED ADULT ROLES:**

For Lorenzo to actively participate in his community to fulfill valued adult roles as a part of community living and adult life, the following level of support best describes him:

\-Requires support from someone and requires supervision to complete and participate in community activities.

**GOALS:**

The primary purpose of the Implementation Plan is to develop strategies that will assist with Lorenzo to acquire the skills necessary to meet his daily living goals and personal needs. Lorenzo chose a total of two goals to improve his Independent Living Skills. Direct Care Staff will work with Lorenzo on his two goals per quarter and one goal daily, so he does not get overwhelmed. Gradually, as he gains his independence, the group home will introduce new goals for him to work on. He will be encouraged to participate in social and leisure activities in the community as they become available to enhance positive social skills.

**GOAL #1:** To improve his independent living skills by cleaning his bedroom at least once per week, on Saturdays. The trials of his goal will be documented one day per week. To master the chosen goal, Lorenzo must complete the objectives without any assistance during 90% or more of all trials for three consecutive months. Once Lorenzo can complete this goal independently, a new goal will be introduced at the beginning of the following quarter. Assistance from Direct Care Staff will always be available; however, staff will be least intrusive as possible to ensure Lorenzo obtains the acquired skill.

**OBJECTIVES:**

Staff will prompt Lorenzo to begin his goal.

1. Lorenzo will gather his cleaning supplies independently.
2. Lorenzo will dust his furniture independently.
3. Lorenzo will make his bed independently.
4. Lorenzo will sweep and mop his bedroom independently.

If Lorenzo is resistant to physical help, staff will explain why the help is needed.

**GOAL #2:** To improve his independent living skills by washing his own dishes, Lorenzo will wash his dishes independently at least three days a week (Monday, Wednesday and Saturdays). To master his chosen goal, Lorenzo must complete the objectives without assistance during 90% or more of all trials for three consecutive months. Once Lorenzo can complete this goal independently, a new goal will be introduced at the beginning of the following quarter. Assistance from Direct Care Staff will always be available; however, staff will be least intrusive as possible to ensure Lorenzo obtains the acquired skill.

**OBJECTIVES:**

Staff will prompt Lorenzo to begin his goal.

1. Lorenzo will gather his dishes from the table independently.
2. Lorenzo will empty all remanence of food in the garbage located in the kitchen.
3. Lorenzo will apply dishwashing liquid to the sponge/ rag and soap the dishes independently.
4. Lorenzo will rinse the dishes with water from the pipe in the kitchen sink independently.
5. Lorenzo will place the washed dishes in the drainer located in the kitchen.
6. Lorenzo will wipe/ dry the counter of any excess water or soap independently.

**METHODOLOGY STATEGIES:**

Lorenzo will be assisted by Direct Care Staff in his efforts to achieve his chosen goals. The appropriate level of guidance, prompting or assistance will be provided depending on the need observed. This will include physical prompts, hand-over-hand guidance, verbal reminders, physical gestures, and demonstrations. The training session will begin by asking Lorenzo if he is ready to begin the task, then review the steps with him. As we instruct him to complete each step, staff will give him an opportunity to attempt it without help. Direct Care Staff will observe him to see if he will complete the steps independently, and then provide positive encouragement and assistance ranging from verbal to physical as needed, while being as least intrusive as possible. Our goal is to use “the prompt fading technique” by continuously reducing the amount of assistance needed.

**SYSTEM DATA COLLECTION/ ASSESSMENT PROGRESS:**

Lorenzo’s performance and progress towards independence will be documented for each day of training on a monthly data sheet. This documentation will include the amount of intervention or assistance required from Direct Care Staff for each individual step, as well as his progress or percentage for each month towards independently completing the goal. A summary of this information will be included in Lorenzo’s quarterly reports. The group home will modify Lorenzo’s Implementation Plan as needed and will also discuss any modifications with all responsible parties prior to making any changes.

**MEDICAL VISITS:**

Physical: 05/20/2022 – upcoming appointment on 08/08/2023

Vision: 07/28/2023 – Follow Up appointment on 09/29/2023

Dental: Unknown – upcoming appointment on 08/07/2023

Podiatrist: 07/17/2023 – follow up in two months

Psychiatrist: 07/28/2023 – follow up appointment on 08/14/2023

**CURRENT MEDICATION:**

Divalproex Sod 500MG (Dr. Gillespie)

Lamotrigine 150MG (Dr. Gillespie)

Olanzapine 10MG (Dr. Gillespie)

Propranolol 10MG (Dr. Gillespie)

Quetiapine Fumarate 200MG (Dr. Gillespie)

Sertraline HCL 50MG (Dr. Gillespie)

Ammonium Lact 12% (Dr. Charles) – for cracked heel/feet

**ABUSE, NEGLECT AND EXPLOITATION:**

Lorenzo has not displayed any signs of abuse, neglect, or exploitation since moving into the group home. He is very vocal. While speaking, we discussed ABUSE and the different types of abuse. Lorenzo stated abuse to him means someone “beating you up or torturing you.” The definition of abuse was clearly explained to him. Abuse was defined to him as treating a person or animal with cruelty or violence, especially when it is done regularly or repeatedly. Lorenzo was made aware of the abuse hotline number which is located on the blue board in the office area of the home beside the filing cabinet. The contact number for the hotline is 1-800-962-2873. It was explained to Lorenzo by staff that if he feels that anyone that he knows or even himself is being abused, neglected, or exploited, he should call the hotline number and make a report. Discussions about NEGLECT were also held with Lorenzo. He was able to explain the different types of neglect. He explained that neglect to him means people are not being care for properly or treated properly. We also spoke about EXPLOITATION; Lorenzo was not able to explain the meaning of exploitation, hence I explained it to him, so he was able to understand easily. I explained using his Social Security money as an example. I stated that someone may be responsible for his monthly check that is supposed to be used to take care of him and buy or pay for whatever he needs. But the person decides to use it to pay for their own bills or personal gain instead of using it to take care of him.
`;

const SAMPLE_ANNUAL = `

**_“The people to Trust”_**

**ANNUAL SUMMARY 2024-2025**

**CONSUMER INFORMATION**

| **Individual’s information:**<br><br>**Name**: Jayvanna Zarate<br><br>**Diagnosis:** Cerebral Palsy<br><br>Mental Retardation, Seizure disorder<br><br>Non verbal<br><br>Walking with difficulty/using wheelchair as needed | **DOB**: 03/29/2003<br><br>**Medicaid number:** 8887162344<br><br>**Social security number:** 632-86-9375<br><br>**Recipient ID:** 8887162344<br><br>**PIN:** 0001011928<br><br>**Status**: Competent adult<br><br>**Date of Admission**: 11/05/2019 |
| --- | --- |
| **Residence**: Mona’s Group Home #3<br><br>**Address**: 730 NW 49<sup>th</sup> Ave Coconut Creek, FL 33063<br><br>**Phone number**: 954-979-6176 | **Next of skin:** Toshia Shepperd<br><br>**Relationship:** Mother<br><br>**Phone number:** 907-793-0610 |
| **Emergency contact:**<br><br>**Group Home owner:** Elsie M. Henry<br><br>**Phone number:** 954-609-8479<br><br>**Group Home administrator:** Gertrude Anselme<br><br>**Phone number:** 954-234-4125<br><br>**Group Home manager:** Daphnee Phanor<br><br>**Phone number:** 646-807-6317/954-913-8968 | **Waiver support coordinator:** Roy-Anne Smith<br><br>**E-mail address:** <royanne.smith@gmail.com><br><br>**Phone number:** 954-778-8132<br><br>**Pharmacy:** Parkshore Pharmacon<br><br>**Address:** 600 Ansin Blvd<br><br>Hallandale Beach, FL 33009<br><br>**Phone number:** 954-874-4646<br><br>**Fax number:** 954-455-1378 |
| **SP Effective Date**: April 1<sup>st</sup> 2024 | **Annual Summary Date:** December 31<sup>st</sup>, 2024<br><br>**Annual Summary completion date:** December 31<sup>st</sup>, 2022025 |
| **IPP Effective Date:** April 1<sup>st</sup> 2024 | **Individual’s day time activity/school:** Bright Horizons School<br><br>**Time:** Monday-Friday (8am-2pm)<br><br>**Address:** 3901 1<sup>st</sup> Terrace Pompano Beach, FL 33064<br><br>**Phone number:**754-321-6400 |

**LIST OF PHYSICIANS FOR JAYVANNA ZARATE**

**Cardiologist:** Dr. Iskowitz Steven

**Address:** 2825 N State Road 7

Margate FL, 33063

**Tel:** 954-972-1600

**Dentist**: Nova Southeastern University Dental Clinic

**Address:** 3200 S University Dr.

Davie, FL 33314

**Phone Number:** 954- 262- 1789

**Neurologist:** Dr. Brad Dajani

**Address:** 1725 N University Dr. Suite 425

Coral Springs, FL 33071

**Phone Number:** 954-539-2030


**LIST OF MEDICATIONS FOR JAYVANNA ZARATE**

**Diagnosis:** Cerebral palsy, Mental retardation, Seizures disorder.

| MEDICATIONS | DOSAGE | RATIONALE |
| --- | --- | --- |
| Clonazepam Tab 1MG | Take one tablet by mouth every morning | Anxiety |
| Clonazepam Tab 1MG | Take two tablets by mouth at bedtime | Anxiety |
| Oxcarbazepin SUS 300MG/5ml | Take 10ML (600MG) by mouth twice a day | Seizure Disorder |
| Quetiapine Tab 100MG | Take one tablet by mouth twice daily | Psychosis |
| Quetiapine Tab 50MG | Take one tablet by mouth twice daily with 100MG for TD=150MG | Psychosis |
| Vyvanse Cap 20MG | Take one cap by mouth once daily. Do not crush. | ADHD |
| Trazodone Tab 100MG | Take three tablets by mouth at bedtime | Insomnia |
| Gabapentin Cap 300MG | Take one tablet by mouth every morning | Pain |
| Saline Nasal Spray 0.65% | 2 sprays in each nostril 3 times a day as needed. Not to exceed 3 doses in 24hrs. Call MD if not relief. | Congestion |
| SOD Chloride 3 ML Inhal-RX | Inhale contents of 1 vial nebulizer every 4 hrs as needed. Not to exceed 6 doses in 24hrs. Call MD if not relief. | Congestion |


**SUPPORT PLAN OUTCOMES**

Jayvanna is easily distracted, making it challenging to work with her on her goals due to her difficulty focusing. As a result, she has progressed slowly in achieving her objectives. However, she will continue to receive encouragement and support from the staff to help her work towards her goals and improve her overall lifestyle.

**IP Annual Goal I:** Jayvanna will tolerate brushing her teeth without screaming and fighting 30% of the time sampled for three consecutive months.

The fourth quarter of last year is included in this report

**Average achieved for the fourth quarter: 43%**

**Average achieved for the first quarter: 14%**

**Average achieved for the second quarter: 18%**

**Average achieved for the third quarter: 21%**

**IP Annual Goal II:** Jayvanna will be able to participate in her shower with hand over hand assistance 30% of the time sampled for three consecutive months.

**Average achieved for the fourth quarter: 44%**

**Average achieved for the first quarter: 15%**

**Average achieved for the second quarter: 19 %**

**Average achieved for the third quarter**: **24%**

**SUMMARIES OF DAILY LIVING AND ACTIVITIES:** Jayvanna Zarate, a young African American woman, returned to Mona’s Group Home in November 2019 after living in Alaska with her mother. Due to escalating behavioral challenges, she transitioned from Mona’s Foster Home to Mona’s Group Home #3 (MGH#3) in June 2020. Diagnosed with cerebral palsy, intellectual disability, and a seizure disorder, Jayvanna faces significant mobility limitations, including an unstable gait caused by a forward-leaning posture and inward-turned legs. She uses a wheelchair for community outings but moves independently indoors with close supervision to prevent falls.

Jayvanna’s weekday routine begins at 6:00 AM, with staff assisting her in bathing, dressing, and toileting. She attends school from 8:00 AM to 2:00 PM, though her short attention span and distractibility pose challenges in the classroom. Nonverbal, she communicates through laughter, screams, or yells to express preferences or emotions, often reacting strongly when offered choices. Despite these challenges, she engages warmly with caregivers and housemates, displaying a playful sense of humor though her physical teasing occasionally causes minor tensions.

Her care requires 24/7 supervision to address incontinence (diapers are changed every two hours), prevent choking during meals, and manage risks such as wandering or unsafe interactions with hazards. Staff administer her medications and monitor her for seizures. Frequent drooling necessitates multiple outfit changes daily. At home, Jayvanna participates in leisure activities like listening to music, watching TV, playing board games, and joining neighborhood walks. These routines aim to balance structure with opportunities for engagement, reflecting her need for both support and stimulation.

**HEALTH SUMMARY**: Jayvanna’s diagnoses include cerebral palsy, intellectual disability, and a seizure disorder. Her anteverted legs cause an unsteady, tiptoe gait, heightening fall risk. Although corrective hip surgery was recommended in October 2018 to improve mobility, her mother altered the care plan, leading to indefinite postponement. Jayvanna now relies primarily on a wheelchair.

She attends occupational therapy twice weekly at Advanced Health Physical Therapy for cerebral palsy and developmental delays. A team oversees her car which include a psychiatrist managing medications and behavioral challenges (some medications were paused without success), a primary care physician handling general health, an optometrist monitoring suspected glaucoma (with 4–6-month follow-ups), and a podiatrist providing routine foot care. The group home coordinates appointments and ensures a validated staff member administers medications.

**BEHAVIORAL STATUS:** Jayvanna’s behavior has significantly escalated over the past year, requiring regular adaptation in her care plan. Her frequent, unpredictable screaming and yelling episodes disrupt group environments, leading her school to transition her to home-based education due to classroom and bus disturbances. During community outings, staff often separate her from others to minimize disruptions. Self-injurious actions, such as twisting shoelaces around her fingers until they bruise, chewing her hair or clothing, and biting her hands when upset, remain regular challenges. Additionally, Jayvanna tries to play with feces often, attempting to remove her diaper to smear or ingest feces, which requires hourly checks to ensure hygiene and safety.

Safety risks are heightened by her lack of self-preservation, she may touch hot surfaces, sharp objects, or other hazards without hesitation. She uses her wheelchair and hands to bang against walls which damage them, requiring staff to redirect her to safer activities. Elopement attempts occur regularly, which demands vigilant supervision to prevent wandering. Sleep disturbances continue despite medication; she stays awake at night screaming, hitting walls, or dismantling her belongings, such as stripping bedding or scattering clothes. Jayvanna struggles with boundaries, often initiating unwanted physical contact (hugging, kissing, or touching) with housemates, staff, or strangers, which creates tension.

When redirected, she reacts aggressively, pulling hair, spitting, or throwing tantrums. Conflicts with housemates have increased, particularly during unstructured time. Staff employ strategies, including redirecting her to tools like music or scalp massages, maintaining structured routines to reduce triggers, and modifying her wheelchair to minimize wall damage. Collaboration with behavioral specialists focuses on improving sleep and addressing self-injury.
-

Despite multiple adjustments to her psychotropic medications, Jayvanna's maladaptive behaviors persist. Her psychiatrist will continue to monitor her condition and make further changes as necessary. Additionally, she is on a waiting list to receive services from a behavior analyst.

The group has implemented the recommended interventions to address Jayvanna's maladaptive behaviors:

- She is encouraged to participate in engaging and occupation-related activities.
- When she exhibits behaviors, such as screaming or yelling, she is redirected to more appropriate activities.
- She receives one-on-one supervision both at home and in the community.
- To prevent her from digging in her diapers, she is provided with sensory stimulation activities, such as playdough.

**COMMUNITY INCLUSION:** Jayvanna attends Bright Horizons School Monday through Friday from 8 a.m. to 2 p.m. On weekends, she participates in various community outings with the group home and her housemates, visiting places like malls, parks, and community events, always wearing the recommended protective equipment. When the weather permits, she also enjoys afternoon strolls around the neighborhood.

**CHOICES/PREFERENCES:** Despite her limited communication abilities and skill set, Jayvanna, like all individuals, is encouraged to make her own choices and act on her preferences. Staff are attentive to her desires, which she expresses through different behaviors such as laughing, shaking her head, making noises, screaming, or pushing things away. She particularly enjoys having her scalp massaged, often giggling and remaining calm during this activity. Jayvanna is happy and smiles when she is out in the community with staff and housemates. She also enjoys snuggling against her housemates while lying on the couch. She expresses displeasure and frustration by screaming and yelling.

**SAFETY:** Jayvanna does not grasp the concept of safety, medical care, or life necessities, so the group home ensures she is constantly supervised to prevent injuries, falls, and skin breakdown.

Key safety concerns for Jayanna include:

1. **Evacuation:** Jayvanna is unable to evacuate independently during a fire or other emergencies requiring evacuation. A dedicated staff member is always available to assist her in such situations.
2. **Elopement:** Jayvanna tends to elope, requiring close supervision. She receives one-on-one monitoring within the home to prevent this and ensure her safety.
3. **Skin Integrity:** Due to incontinence, Jayvanna is at significant risk for impaired skin integrity. To mitigate this, she is regularly checked and changed every one to two hours.

Staff will continue to redirect her to safe areas within the home to prevent interactions with hazardous objects, to stop her from opening doors and walking outside unsupervised, and to manage her tendency to elope in the community. Close monitoring will also continue for seizure activity, evacuation during emergencies, and choking risks. The group home is committed to providing a safe and secure living environment where all safety protocols are followed, including locking up cleaning products and maintaining an enclosed pool and backyard area.

**TEACHING:** Each month, Jayvanna receives education on her rights, individual choices, goals, and interests. She is given information on how to report abuse, neglect, and exploitation through picture-based instruction. Emergency numbers are provided to her, along with guidance on how to make a phone call if she needs to report any abuse. Jayvanna is also taught about the importance of staying healthy, accessing medical care, eating properly, and choosing her medical provider. Additionally, she is informed about HIPAA regulations, human trafficking, sexual education, community safety, stranger safety, home safety, and the side effects of her medications. During these teaching sessions, she often responds by screaming, yelling, or laughing. The group home also educates Jayvanna’s support circle, instructing them on how to recognize signs of abuse, neglect, and exploitation and the importance of reporting any such signs promptly and accurately to the appropriate parties and agencies.

| **Topic/Date** | **Tools Used** | **Documented** | **Client Status** | **Staff Assessment** |
| --- | --- | --- | --- | --- |
| ANE<br><br>/Hipaa/ | Pictures | Free standing tools, video | Demonstrates no active knowledge | Monitoring and continue training |
| Medication | Pictures | Free standing tools | Demonstrates no active knowledge. | Monitoring and continue training |
| Choices and Rights | Pictures | Free standing tools | Demonstrates no active knowledge | Monitoring and continue training |
| Bill of Rights | Pictures, Videos | Free standing tools, video | Demonstrates no active knowledge | Monitoring and continue training |
| Emergency Preparedness/ | Pictures | Free standing tools | Demonstrates no active knowledge | Ongoing training |
| Health and Safety | Pictures and demonstration | Free standing tools | Demonstrates no active knowledge | Monitoring/prevention/ Ongoing training |

**SUMMARY OF SERVICE**

| **Services** | **Provider** | **Status** | **Paid and Unpaid** |     |
| --- | --- | --- | --- |     |
| Residential Habilitation | Mona’s Group Home | Active and Ongoing |     | Paid |
| Support Coordination | Roy Ann Smith | Active and Ongoing |     | Paid |
| Natural Supports | Family members | Active and Ongoing |     | Unpaid |
| Community Supports | Family members | Active and Ongoing |     | Unpaid |
| School | Bright Horizons School | Active and Ongoing |     | Unpaid |
| Transportation | Tops Paratransit | Active and ongoing |     | Paid |
| Incontinence consumable supplies | Parkshore Pharmacy | Active and ongoing |     | Paid |




| Date given to support coordinator: **01/01/2025** | By Fax | Hand delivered | **By E-mail** |
| --- | --- | --- | --- |
| Date given to Jayvanna: **01/01/2025** | By Fax | **Hand delivered** | By E-mail |
`;

// === PROMPT BUILDERS ===
function buildImplementationPrompt(fields) {
  // ensure fields is an object
  fields = fields || {};
  const name    = (fields['First Name'] || '⚠️ Missing data: First Name') + ' ' +
                  (fields['Last Name']  || '⚠️ Missing data: Last Name');
  const dob     = fields['DOB']     || '⚠️ Missing data: DOB';
  const goals   = Array.isArray(fields['Interests & Goals'])
                    ? fields['Interests & Goals'].join(', ')
                    : (fields['Interests & Goals'] || '⚠️ Missing data: Interests & Goals');
  const network = Array.isArray(fields['Support Network'])
                    ? fields['Support Network'].join(', ')
                    : (fields['Support Network'] || '⚠️ Missing data: Support Network');

  return '' +
    'Below is a SAMPLE Implementation Plan.  \n' +
    '**Do not hallucinate**—only use the data provided.  \n' +
    'If you see a ⚠️ note, it means the data was missing.\n\n' +
    SAMPLE_IMPLEMENTATION +
    '\n–––––\n\n' +
    'Now, in the same format as above, write a new Implementation Plan using natural, clear language:\n\n' +
    'Client: ' + name + '  \n' +
    'DOB: '    + dob  + '  \n' +
    'Interests & Goals: ' + goals  + '  \n' +
    'Support Network: '   + network + '\n\n' +
    'Be concise, use numbered steps and bullet timelines, and mirror headings exactly.';
}

function buildAnnualPrompt(fields) {
  fields = fields || {};
  const name     = (fields['First Name'] || '⚠️ Missing data: First Name') + ' ' +
                   (fields['Last Name']  || '⚠️ Missing data: Last Name');
  const dob      = fields['DOB']       || '⚠️ Missing data: DOB';
  const summary  = fields['Clinical Summary'] || '⚠️ Missing data: Clinical Summary';
  const progress = fields['Progress to Date'] || '⚠️ Missing data: Progress to Date';

  return '' +
    'Below is a SAMPLE Annual Summary.  \n' +
    '**Do not hallucinate**—only use the data provided.  \n' +
    'If you see a ⚠️ note, it means the data was missing.\n\n' +
    SAMPLE_ANNUAL +
    '\n–––––\n\n' +
    'Now, in the same format as above, write a new Annual Summary using natural, clear language:\n\n' +
    'Client: ' + name + '  \n' +
    'DOB: '    + dob  + '  \n' +
    'Clinical Summary: ' + summary + '  \n' +
    'Progress to Date: '  + progress + '\n\n' +
    'Use bullets and headers exactly as in the sample, and note any missing fields with ⚠️.';
}

// === OPENAI HELPER WITH BUDGET CONTROL ===
function callOpenAI(prompt) {
  const response = UrlFetchApp.fetch('https://api.openai.com/v1/chat/completions', {
    method: 'post',
    contentType: 'application/json',
    headers: { Authorization: 'Bearer ' + OPENAI_API_KEY },
    payload: JSON.stringify({
      model: MODEL,
      messages: [{ role: 'user', content: prompt }],
      max_tokens: 1000,
      temperature: 0.7
    })
  });

  const data = JSON.parse(response.getContentText());
  const content = data.choices[0]?.message?.content?.trim() || '';
  const usage = data.usage || { total_tokens: 1000 }; // assume max cost if unknown
  return { content, usage };
}

// === GENERATOR ===
function generateDocuments() {
  const records = fetchAirtableRecords();
  let spent = 0;

  for (let i = 0; i < records.length; i++) {
    const fields = records[i] || {};

    // Implementation Plan
    const impl = callOpenAI(buildImplementationPrompt(fields));
    const implCost = (impl.usage.total_tokens / 1000) * COST_PER_1K_TOKENS;
    if (spent + implCost > BUDGET_DOLLARS) break;
    spent += implCost;
    createGoogleDoc(fields, impl.content, 'Implementation Plan');

    // Annual Summary
    const ann = callOpenAI(buildAnnualPrompt(fields));
    const annCost = (ann.usage.total_tokens / 1000) * COST_PER_1K_TOKENS;
    if (spent + annCost > BUDGET_DOLLARS) break;
    spent += annCost;
    createGoogleDoc(fields, ann.content, 'Annual Summary');
  }

  Logger.log('Batch complete. Total spent: $' + spent.toFixed(4) + ' / $' + BUDGET_DOLLARS);
}

// === STUBS ===
function fetchAirtableRecords() {
  const url = 'https://api.airtable.com/v0/appCDZB437amxaRPq/tbl4MEwRpzaEVmPka?view=viw4b8ZOAkB0gM1Yy';
  const resp = UrlFetchApp.fetch(url, {
    headers: { Authorization: 'Bearer ' + AIRTABLE_PAT }
  });
  const data = JSON.parse(resp.getContentText());
  return data.records.map(r => r.fields || {});
}

function createGoogleDoc(fields, text, docType) {
  const doc = DocumentApp.create(docType + ' - ' + (fields['First Name'] || 'Unnamed'));
const body = doc.getBody();
text.split('\n').forEach(line => {
  if (line.startsWith('**') && line.endsWith('**')) {
    body.appendParagraph(line.replace(/\*\*/g, '')).setHeading(DocumentApp.ParagraphHeading.HEADING2);
  } else {
    body.appendParagraph(line);
  }
})
}

// Kickoff
function runBatch() {
  generateDocuments();
}
